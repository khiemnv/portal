<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <style type="text/css">
        .label {
            padding: 5px;
            color: blue;
            font-size: 20px;
            font-weight: bold;
        }

        .content {
            width: 90%;
            margin-left: 5%;
            background-color: whitesmoke;
        }

        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }

        table {
            width: 100%;
        }

        th {
            color: white;
            background-color: blue;
            font-style: normal;
        }

        .col1 {
            width: *
        }
    </style>
</head>
<body style="background-repeat: no-repeat; background-attachment: scroll; padding: 10px">
    <div style="background-color: white; width: 600px; position: relative; left: auto;">
        <span class="label">Bài giảng</span>
        <iframe id="frame1" width="720" src="" frameborder="1" allowtransparency="true" allowfullscreen></iframe>
        <div id="mp4player" style="text-align:center"> 
<!--           <button onclick="playPause()">Play/Pause</button> 
          <button onclick="makeBig()">Big</button>
          <button onclick="makeSmall()">Small</button>
          <button onclick="makeNormal()">Normal</button>
          <br><br/> -->
          <video id="video1" width="720" autoplay controls>
            <source src="" type="video/mp4">
            Your browser does not support HTML5 video.
          </video>
        </div> 
		<br/>
        <div id="lectTbl">
            <table>
                <tr>
                    <th>ngày</th>
                    <th>bài giảng</th>
                    <th>người giảng</th>
                </tr>
                <tr>
                    <td>01/01/2019</td>
                    <td>chu de1</td>
                    <td>su ong</td>
                </tr>
            </table>
        </div>
    </div>
	<div id="log" style="color:gray">playing:</div>
    <script>
        jsObj = {
            "cols": ["tieu de", "người giảng", "doi tuong", "chu de", "ngày", "noi dung", "link"],
            "recs": [{
                "crt": "01/01/2019",
                "title": "bai giang 1",
                "topic": "chu de 2",
                "target": "doi tuong 1",
                "auth": "su ong",
                "content": "noi dung",
                "link": "file:///C:/Users/Khiem/Downloads/movie/Harry.Potter.and.the.Deathly.Hallows.Part.1.2010.mp4"
            },
            {
                "crt": "02/01/2019",
                "title": "bai giang 2",
                "topic": "chu de 2",
                "target": "doi tuong 2",
                "auth": "su phu",
                "content": "noi dung",
                "link": "https://www.youtube.com/watch?v=HQ1lFe9I0lo"
            }
            ]
        };
        //jsTxt = '';
        //var jsObj = eval("(" + jsTxt + ")");

        //video
        var m_video1 = document.getElementById("video1");

        //hide frame
        document.getElementById("frame1").style.display = "none";
        document.getElementById("mp4player").style.display = "none";
        document.getElementById("log").innerHTML = "browser: " + who();
        //lecture

        txt = "";
        txt += '<table style="width: 100%;">';
        txt += "<tr>";
        cols = jsObj.cols;
        for (i in cols) {
            txt += '<th class="col1">' + cols[i] + '</th>';
        }
        txt += "</tr>";
        for (i in jsObj.recs) {
            rec = jsObj.recs[i];
            txt += "<tr>";
            txt += "<td>" + rec.title + "</td>";
            txt += "<td>" + rec.auth + "</td>";
            txt += "<td>" + rec.target + "</td>";
            txt += "<td>" + rec.topic + "</td>";
            txt += "<td>" + rec.crt + "</td>";
            txt += "<td>" + rec.content + "</td>";
            txt += "<td>" + genRef(rec.link) + "</td>";
            txt += "</tr>";
        }
        txt += "</table>";
        document.getElementById("lectTbl").innerHTML = txt;

        function genRef(lnk) {
            var m = lnk.match(/(\.mp4$|\.mp3$|youtube\.com)/i);
            var lbl = "link";
            if (m != null) {
                lbl = m[0];
            }
            txt = '<a onclick="jsfunction(' + "'" + lnk + "'" + ')" href="#">' + lbl + '</a>';
            return txt;
        }

        function jsfunction(lnk) {
            ytlnk = crtYTEmbed(lnk);
            if (ytlnk != '') {
                //play link
                show("mp4player", false);

                lnk = ytlnk;
                str = who();
                n = str.search(/Chrome|Edge|Firefox/i)
                if (n == -1) {
                    document.getElementById("log").innerHTML = "Can not play: [" + lnk + "] on " + str;
                    return;
                }

                show("frame1", true);
                document.getElementById("frame1").src = lnk + "?autoplay=1";
            }
            else if (lnk.search(/\.mp4$/i) != -1) {
                //play file.mp4
                show("frame1", false);
                show("mp4player", true);
                m_video1.src = lnk;
            }
        }

        //get browser info

        function who() {
            var ua = navigator.userAgent, tem,
                M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
            if (/trident/i.test(M[1])) {
                tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
                return 'IE ' + (tem[1] || '');
            }
            if (M[1] === 'Chrome') {
                tem = ua.match(/\b(OPR|Edge)\/(\d+)/);
                if (tem != null) return tem.slice(1).join(' ').replace('OPR', 'Opera');
            }
            M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
            if ((tem = ua.match(/version\/(\d+)/i)) != null) M.splice(1, 1, tem[1]);
            return M.join(' ');
        }

        function crtYTEmbed(url) {
            var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            var match = url.match(regExp);

            if (match && match[2].length == 11) {
                return 'https://www.youtube.com/embed/' + match[2];
            } else {
                return '';
            }
        }
        function toggle(id) {
            var x = document.getElementById(id);
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        //__in showhide: true-> show
        function show(id, showhide) {
            var x = document.getElementById(id);
            if (showhide) {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        //video1 controls
        function playPause() {
            if (m_video1.paused)
                m_video1.play();
            else
                m_video1.pause();
        }

        function makeBig() {
            w = Math.min(m_video1.width * 1.1, 1080);
            m_video1.width = w;
        }

        function makeSmall() {
            w = Math.max(m_video1.width * 0.9, 360);
            m_video1.width = w;
        }

        function makeNormal() {
            m_video1.width = 720;
        }
    </script>
</body>
</html>
